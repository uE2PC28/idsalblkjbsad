"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4379],{43812:function(a,b,c){c.d(b,{"$":function(){return z},J:function(){return A}});var d=c(86522),e=c(34795),f=c(76854),g=c(59740),h=c(2784),i=c(80425),j=c(76613),k=c(7896),l=c(85942),m=c(78642),n=["id"],o=["product"],p="AdsBanner",q="AdsCarousel",r="AdsShowcase",s=[r,p,q],t=function(a){var b,c,d,e,f,g,h=a.data,j=a.placements,n=a.structure,o=(0,i.y$)("viewing-history"),s=o.get,t=n.cookies,u=(null==h?void 0:h.product)||{},v=u.category,w=void 0===v?{}:v,x=(null==h?void 0:null==(b=h.category)?void 0:null==(c=b[0])?void 0:c.id)||null,y=[null==h?void 0:null==(d=h.product)?void 0:d.id].filter(Boolean),z=(null==(e=s())?void 0:null==(f=e.items)?void 0:f.map(function(a){return a.category.id}))||[],A=[],B=[],C=t||{},D=C.partnerId,E=C.location,F=C.enableFallbackBanner;return j.forEach(function(a){var b,c,d,e=a.name,f=a.categories,h=void 0===f?[]:f,i=a.limit,j=a.slot,o=a.consumer,s=a.channel,t=a.searchTerm;if(e===r)B.push({categories:(b=w,c=z,d=x,(null==b?void 0:b.id)?[b.id]:d?[d]:(null==c?void 0:c.length)?(0,l.Z)(new Set(c)).slice(-5):["MO","EP","CM","UD","ME"]),consumer:o,limit:i,slot:j});else if([p,q].includes(e)&&!F){var u=(0,m.VD)({categories:h,searchTerm:t},n);A.push((0,k.Z)({categories:h,consumer:o,limit:i,slot:j},u))}s&&(g=s)}),(0,k.Z)({},A.length&&{banners:A},{metadata:{channelCode:g,isLoyalty:!1,partnerId:D},omitProductIds:y,products:B,zipcode:(null==E?void 0:E.zipCode)||""})},u=function(a){var b=new Map,c=function(a){var c=a.static,d=a.name;if(s.includes(d)){var e=c.channel,f=c.categories,g=c.consumer,h=c.limit,i=void 0===h?1:h,j=c.slot,l=c.slots,m=c.searchTerm,n=(null!=l?l:[]).concat(j?{slot:j}:[]),o=(0,k.Z)({categories:f,channel:e,consumer:g,limit:i,name:d},m&&{searchTerm:m}),p=n.filter(function(a){var c=a.slot;return c&&!b.has(c)});p.forEach(function(a){return b.set(a,(0,k.Z)({},o,a))})}},d=function a(b){if(c(b),(null==b?void 0:b.children)&&b.children.forEach(a),"group"===b.type&&b.components.forEach(a),"HeaderDesktop"===b.name){var d=b.static.menuData.data,e=d.categoryList,f=d.allCategories,g=e.list.concat(f).map(function(a){return{name:p,static:a.adUnit.static}});g.forEach(a)}};return a.components.forEach(d),b},v=function(a){var b=a.data,c=a.structure;if(Array.isArray(c.components)){var d=u(c);if(d.size)return t({data:b,placements:Array.from(d.values()),structure:c})}return null},w=["children"];function x(){x=function(){return a};var a={},b=Object.prototype,c=b.hasOwnProperty,e=Object.defineProperty||function(a,b,c){a[b]=c.value},f="function"==typeof Symbol?Symbol:{},g=f.iterator||"@@iterator",h=f.asyncIterator||"@@asyncIterator",i=f.toStringTag||"@@toStringTag";function j(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}try{j({},"")}catch(k){j=function(a,b,c){return a[b]=c}}function l(a,b,c,d){var f=Object.create((b&&b.prototype instanceof o?b:o).prototype);return e(f,"_invoke",{value:y(a,c,new C(d||[]))}),f}function m(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(d){return{type:"throw",arg:d}}}a.wrap=l;var n={};function o(){}function p(){}function q(){}var r={};j(r,g,function(){return this});var s=Object.getPrototypeOf,t=s&&s(s(D([])));t&&t!==b&&c.call(t,g)&&(r=t);var u=q.prototype=o.prototype=Object.create(r);function v(a){["next","throw","return"].forEach(function(b){j(a,b,function(a){return this._invoke(b,a)})})}function w(a,b){var f;function g(e,f,h,i){var j=m(a[e],a,f);if("throw"!==j.type){var k=j.arg,l=k.value;return l&&"object"==(0,d.Z)(l)&&c.call(l,"__await")?b.resolve(l.__await).then(function(a){g("next",a,h,i)},function(a){g("throw",a,h,i)}):b.resolve(l).then(function(a){k.value=a,h(k)},function(a){return g("throw",a,h,i)})}i(j.arg)}e(this,"_invoke",{value:function(a,c){function d(){return new b(function(b,d){g(a,c,b,d)})}return f=f?f.then(d,d):d()}})}function y(a,b,c){var d="suspendedStart";return function(e,f){if("executing"===d)throw Error("Generator is already running");if("completed"===d){if("throw"===e)throw f;return E()}for(c.method=e,c.arg=f;;){var g=c.delegate;if(g){var h=z(g,c);if(h){if(h===n)continue;return h}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===d)throw d="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);d="executing";var i=m(a,b,c);if("normal"===i.type){if(d=c.done?"completed":"suspendedYield",i.arg===n)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(d="completed",c.method="throw",c.arg=i.arg)}}}function z(a,b){var c=a.iterator[b.method];if(void 0===c){if(b.delegate=null,"throw"===b.method){if(a.iterator.return&&(b.method="return",b.arg=void 0,z(a,b),"throw"===b.method))return n;b.method="throw",b.arg=TypeError("The iterator does not provide a 'throw' method")}return n}var d=m(c,a.iterator,b.arg);if("throw"===d.type)return b.method="throw",b.arg=d.arg,b.delegate=null,n;var e=d.arg;return e?e.done?(b[a.resultName]=e.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=void 0),b.delegate=null,n):e:(b.method="throw",b.arg=TypeError("iterator result is not an object"),b.delegate=null,n)}function A(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function B(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function C(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(A,this),this.reset(!0)}function D(a){if(a){var b=a[g];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var d=-1,e=function b(){for(;++d<a.length;)if(c.call(a,d))return b.value=a[d],b.done=!1,b;return b.value=void 0,b.done=!0,b};return e.next=e}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=q,e(u,"constructor",{value:q,configurable:!0}),e(q,"constructor",{value:p,configurable:!0}),p.displayName=j(q,i,"GeneratorFunction"),a.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===p||"GeneratorFunction"===(b.displayName||b.name))},a.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,q):(a.__proto__=q,j(a,i,"GeneratorFunction")),a.prototype=Object.create(u),a},a.awrap=function(a){return{__await:a}},v(w.prototype),j(w.prototype,h,function(){return this}),a.AsyncIterator=w,a.async=function(b,c,d,e,f){void 0===f&&(f=Promise);var g=new w(l(b,c,d,e),f);return a.isGeneratorFunction(c)?g:g.next().then(function(a){return a.done?a.value:g.next()})},v(u),j(u,i,"Generator"),j(u,g,function(){return this}),j(u,"toString",function(){return"[object Generator]"}),a.keys=function(a){var b=Object(a),c=[];for(var d in b)c.push(d);return c.reverse(),function a(){for(;c.length;){var d=c.pop();if(d in b)return a.value=d,a.done=!1,a}return a.done=!0,a}},a.values=D,C.prototype={constructor:C,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!a)for(var b in this)"t"===b.charAt(0)&&c.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function d(c,d){return g.type="throw",g.arg=a,b.next=c,d&&(b.method="next",b.arg=void 0),!!d}for(var e=this.tryEntries.length-1;e>=0;--e){var f=this.tryEntries[e],g=f.completion;if("root"===f.tryLoc)return d("end");if(f.tryLoc<=this.prev){var h=c.call(f,"catchLoc"),i=c.call(f,"finallyLoc");if(h&&i){if(this.prev<f.catchLoc)return d(f.catchLoc,!0);if(this.prev<f.finallyLoc)return d(f.finallyLoc)}else if(h){if(this.prev<f.catchLoc)return d(f.catchLoc,!0)}else{if(!i)throw Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return d(f.finallyLoc)}}}},abrupt:function(a,b){for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d];if(e.tryLoc<=this.prev&&c.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var f=e;break}}f&&("break"===a||"continue"===a)&&f.tryLoc<=b&&b<=f.finallyLoc&&(f=null);var g=f?f.completion:{};return g.type=a,g.arg=b,f?(this.method="next",this.next=f.finallyLoc,n):this.complete(g)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),n},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),B(c),n}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;B(c)}return e}}throw Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:D(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=void 0),n}},a}var y=(0,h.createContext)({}),z=function(a){var b,c=a.children,d=(0,g.Z)(a,w),l=d.data,m=d.structure,p=(0,j.useClient)(),q=(0,h.useState)(),r=(0,f.Z)(q,2),s=r[0],t=r[1],u=(0,h.useState)(!0),z=(0,f.Z)(u,2),A=z[0],B=z[1],C=function(a){var b;return null==s?void 0:null==(b=s.banners)?void 0:b[a]},D=function(a){var b;return null==s?void 0:null==(b=s.products)?void 0:b[a]},E=(b=(0,e.Z)(x().mark(function a(){var b,c,d,e;return x().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(B(!0),a.prev=1,d=v({data:l,structure:m})){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,p.query({query:j.AdsQuery,variables:d});case 7:var f,h;t({banners:(f=(null==(e=a.sent)?void 0:null==(b=e.data.ads)?void 0:b.banners)||[]).reduce(function(a,b){return(a[b.slot]=a[b.slot]||[]).push(b),a},{}),products:(h=(null==e?void 0:null==(c=e.data.ads)?void 0:c.products)||[]).reduce(function(a,b){var c=b.product,d=c.id,e=(0,g.Z)(c,n),f=(0,g.Z)(b,o),h=(0,k.Z)({id:d},e,f);return(a[b.slot]=a[b.slot]||[]).push(h),a},{})}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error("[useAdsProvider] - error: ".concat(a.t0));case 14:return a.prev=14,B(!1),a.finish(14);case 17:case"end":return a.stop()}},a,null,[[1,11,14,17]])})),function(){return b.apply(this,arguments)});return(0,h.useEffect)(function(){i.er.onClient&&E()},[l]),h.createElement(y.Provider,{value:{ads:s,getBannerBySlot:C,getProductsBySlot:D,isLoading:A}},c)};z.defaultProps={data:{}};var A=function(){return(0,h.useContext)(y)}},89382:function(a,b,c){var d,e=c(71171),f=c(2784),g=c(99673),h=g.ZP.div(d||(d=(0,e.Z)(["\n  ",";\n"])),function(a){return a.layout}),i=function(a){var b=function(b){var c,d=b.layout,e="mod-".concat(null==(c=a.name)?void 0:c.toLowerCase());return Object.keys(d).length?f.createElement(h,{layout:d,"data-testid":e},f.createElement(a,b)):f.createElement(a,b)};return b.defaultProps={layout:{}},b.dataSource=a.dataSource,b.ssr=a.ssr,b.displayName=a.displayName||a.name,b};b.Z=i}}])
//# sourceMappingURL=4379-7d026a9ae0989c06.js.map
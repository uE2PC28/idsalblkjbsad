(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1990],{44189:function(){var e;(e||(e={})).product="product"},1990:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var a=i(45663),s=i(99120),o=i(44194),r=i(50464);i(44189);var l=i(23110),n=i(92336),c=i(17912),d=i.n(c),u=i(55086),p=i(64432),g=i(99498);let v=e=>e.flatMap(e=>"string"==typeof e?e:e.categoryId),y=({page:e,categories:t,sellers:i,subcategories:a})=>{let s=[];return Array.isArray(a)&&!(0,g.Z)(a)&&s.push({type:"subcategory",values:v(a)}),Array.isArray(t)&&!(0,g.Z)(t)&&s.push({type:"category",values:v(t)}),e&&s.push({type:"page",values:e.toString()}),Array.isArray(i)&&!(0,g.Z)(i)&&s.push({type:"seller",values:i}),s},h=({cookies:e,filters:t,options:i,includePagination:a,productId:s,queryOptions:r={},route:l})=>{var c,g;let v=(0,p.useClient)(),h=(0,u.default)(),[I,m]=(0,o.useState)([]),[b,f]=(0,o.useState)(null),{fetchPolicy:w="cache-first",timeout:k=null===(g=null===(c=h.client)||void 0===c?void 0:c.showcase)||void 0===g?void 0:g.timeout}=r,P=({categories:e,customerId:t,includePagination:i=!1,page:a,pageId:s,partnerId:o,placeId:r,productId:l,sellers:c,showcaseId:u,storeId:p,subcategories:g,zipcode:h})=>(0,n.__awaiter)(void 0,void 0,void 0,function*(){var n;try{let{data:I}=yield v.query({context:{timeout:k},fetchPolicy:w,query:d(),variables:{customerId:t,filters:y({categories:e,sellers:c,page:a,subcategories:g}),includePagination:i,pageId:s,partnerId:o,placeId:r,productId:l,showcaseId:u,storeId:p,zipcode:h}}),b=null===(n=null==I?void 0:I.recommendation)||void 0===n?void 0:n.dynamic;m(b)}catch(e){f(e)}});return(0,o.useEffect)(()=>(P(Object.assign(Object.assign(Object.assign(Object.assign({productId:s,includePagination:a},e),t),i),l)),()=>{m([])}),[s,null==t?void 0:t.categories,null==t?void 0:t.subcategories,null==e?void 0:e.partnerId,null==e?void 0:e.customerId]),{error:b,getData:P,recommendation:I}};var I=i(5205);i(41074),i(32506),i(73427);var m=i(90551),b=i(26230);i(21037);var f=i(57244);i(94811);var w=i(81609);let k=({productId:e,includePagination:t,childrenSettings:i,pageId:n,placeId:c,showcaseId:d,categories:u,page:p,sellers:g,subcategories:v,className:y,type:k,spa:P=!0})=>{var C,E,S;let{publish:q}=(0,s.useEvents)(),Z=(0,l.Y)(),A=(0,b.Z)("rave/Showcase"),O=(0,a.useRouter)(),_=null===(C=O.query)||void 0===C?void 0:C.storeId,j=null===(E=O.query)||void 0===E?void 0:E.categoryId,F=null===(S=O.query)||void 0===S?void 0:S.subCategoryId,D=O.getCookie(w.i1),N=O.getCookie(w.PF),T=O.getCookie(w.VE),{city:z,state:W}=(0,m.Jv)(O),{isOnWishlist:M,removeFromWishlist:V,addToWishlist:x}=Z,J={"showcase.betteroffer":"betteroffer","showcase.button":"button","showcase.carousel":"carousel","showcase.endless":"list","showcase.highlight":"highlight","showcase.list":"list","showcase.rank":"rank","showcase.side":"carousel"},R=(e,t,i)=>{let{id:a,title:s,price:o={}}=i;t?x({name:s,price:parseFloat(o.price),variationId:a}):V({variationId:a})},{error:Y,recommendation:B}=h({productId:e,includePagination:t,options:{pageId:n,placeId:c,showcaseId:d},filters:{categories:u,page:p,sellers:g,subcategories:v},route:{storeId:_},cookies:{customerId:D||"0",partnerId:N,zipcode:T}});return Y?(A.error(["Something went wrong while requesting Showcase data","Please make sure you are sending the correct variables","Error Message:",Y].join("\n")),null):o.createElement(o.Fragment,null,null==B?void 0:B.map(({id:e,title:t,designTokenId:a,products:s},l)=>{let d=k||J[a];return o.createElement("div",{"data-testid":c},o.createElement(r.Z,{key:(0,I.Z)(t).concat(l.toString()),type:d,title:t,items:(0,f.Z)(s,M),className:y,childrenSettings:i,onItemView:i=>((e,t,i)=>{let{id:a,title:s,type:o}=t;q("product:view",{value:{product:e,listPosition:i,eventData:{display:"rank"===o?"list":"gallery",filters:[j,F],list:s,listPosition:i,origin:"bob",type:"recomendacao",showcase:{id:a,pageId:n,placeId:c,title:s,type:o}},state:W,city:z}})})(i,{id:e,designTokenId:a,title:t,type:d},l+1),onItemClick:(i,s)=>((e,t,i,a)=>{e.preventDefault();let{id:s,title:o,type:r}=i;q("product:item:click",{value:{product:t,listPosition:a,eventData:{display:"rank"===r?"list":"gallery",filters:[j,F],list:o,listPosition:a,origin:"bob",type:"recomendacao",showcase:{id:s,pageId:n,placeId:c,title:o,type:r}},state:W,city:z}}),O.push(t.path,{spa:P})})(i,s,{id:e,designTokenId:a,title:t,type:d},l+1),onItemFavoriteClick:R}))}))}}}]);
//# sourceMappingURL=1990-d82b7c2eeb70ebd9.js.map